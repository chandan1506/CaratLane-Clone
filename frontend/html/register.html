<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up page</title>
    <link rel="stylesheet" href="../styles/register-login.css">  
     <!-- sweet alert -->
     <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> 
</head>
<body>
    <h1>Sign up form</h1>
    <div class="form-container">
        <form>
            <input required  type="text" id="name" placeholder="Enter your full name">
            <input required type="email" id="email" placeholder="Enter your email">
            <input required type="number" id="contact" placeholder="Enter your contact">
            <input required  type="password" id="password" placeholder="Enter your password">
            <input type="submit"  id="submit-btn">  
             <a class="user-anchor" href="./login.html">Already an User</a>
        </form>
    </div>
</body>
</html>
<script>
    let registerForm = document.querySelector("form")
registerForm.addEventListener("submit",async (e)=>{
e.preventDefault()
let userObj = {}
let allInputTags = document.querySelectorAll("input")
for(let i=0;i<allInputTags.length;i++){
    userObj[allInputTags[i].id] = allInputTags[i].value
}
try{
        let register_request = await fetch("https://angry-turtleneck-lamb.cyclic.app/users/signup",{
            method:"POST",
            headers:{
               "Content-Type": "application/json"
            },
            body:JSON.stringify(userObj)
        })
        const res = await register_request.json() 
        if(res.message == "User Registered"){
            await swal(`${res.message}`,"","success")
        window.location.href ="./login.html"
        }else{
        
            await swal(`${res.message}`,"","error")
        }
} catch (error) {
        console.log(error)
    }
    })
</script>